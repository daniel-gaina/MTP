\documentclass{article}
\textwidth 130mm
\textheight 200mm

%************************ packages *********************************
\usepackage{booktabs} % for tabs
\usepackage{authblk}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage[inline]{enumitem}
\usepackage[colorlinks=true,linkcolor=blue]{hyperref}
\usepackage[latin1]{inputenc}
\usepackage{xy}
\xyoption{all}
\usepackage{tikz}
\usepackage{mathabx}


%************** line enumeration ********************************* 
\usepackage{xcolor}
%\usepackage{vruler} \setvruler[10pt][1][1][4][1][10pt][10pt][2pt][1.0\textheight]

%**************Theorem environments********************************* 
\renewenvironment{abstract}{\section*{Abstract}\small}{}
\newtheorem{definition}{Definition}
\newtheorem{example}[definition]{Example}
\newtheorem{application}[definition]{Application}
\newtheorem{theorem}[definition]{Theorem}
\newtheorem{exercise}[definition]{Exercise}
\newtheorem{lemma}[definition]{Lemma}
\newtheorem{proposition}[definition]{Proposition}
\newtheorem{corollary}[definition]{Corollary}
\newtheorem{fact}[definition]{Fact}
\newtheorem{remark}[definition]{Remark}
\newtheorem{framework}{Framework}[section]
\newtheorem{assumption}{Assumption}
\newtheorem{notation}[framework]{Notation}
%**************Keywords********************************* 
\def\keywords{\vspace{.5em}
{\noindent\textbf{Keywords}:\,\relax%
}}
\def\endkeywords{\par}
%************************ shortcuts ********************************
\newcommand{\PL}{{\mathbf{PL}}}
\newcommand{\HPL}{{\mathbf{HPL}}}

\newcommand{\FOL}{{\mathbf{FOL}}}
\newcommand{\HCL}{{\mathbf{HCL}}}
\newcommand{\REL}{{\mathbf{REL}}}
\newcommand{\HFOL}{{\mathbf{HFOL}}}
\newcommand{\HFOLS}{{\mathbf{HFOLS}}}
\newcommand{\HFOLR}{{\mathbf{HFOLR}}}
\newcommand{\HHCLS}{{\mathbf{HHCLS}}}

\newcommand{\OSA}{{\mathbf{OSA}}}
\newcommand{\HOSA}{{\mathbf{HOSA}}}


\newcommand{\Nom}{\mathtt{Nom}}
\newcommand{\Sig}{\mathtt{Sig}}
\newcommand{\Mod}{\mathtt{Mod}}
\newcommand{\Sen}{\mathtt{Sen}}

\newcommand{\Cat}{\mathtt{Cat}}
\newcommand{\Set}{\mathtt{Set}}

\newcommand{\I}{\mathtt{I}}
\newcommand{\HI}{\mathtt{HI}}

\newcommand{\N}{{\mathbb{N}}}

\newcommand{\E}{\mathcal{E}}
\renewcommand{\P}{\mathcal{P}}
\renewcommand{\L}{\mathcal{L}}

\newcommand{\C}{\mathtt{C}}


\newcommand{\F}{\mathtt{F}}
\newcommand{\K}{\mathtt{K}}

\newcommand{\A}{\mathfrak{A}}
\newcommand{\B}{\mathfrak{B}}
\newcommand{\D}{\mathfrak{D}}

\newcommand{\SP}{{\mathtt{SP}}}

\newcommand{\vdashv}{\mathrel{\models\!\!\!|}}
\newcommand{\red}{\!\upharpoonright\!}
%***************************************************************
\newcommand{\sort}{\mathtt{sort}}
\newcommand{\arity}{\mathtt{arity}}
\newcommand{\length}{\mathtt{length}}
\newcommand{\ari}{\mathtt{ar}}
\newcommand{\va}{\mathtt{va}}
\newcommand{\s}{\mathtt{s}}

\newcommand{\oS}{{\overline S}}
\newcommand{\oF}{{\overline F}}
\newcommand{\oP}{{\overline P}}
\newcommand{\oSigma}{{\overline\Sigma}}
\newcommand{\oDelta}{{\overline\Delta}}
\newcommand{\oX}{{\overline X}}
% ***************************************************************
\newcommand{\bigand}{\bigwedge}
\renewcommand{\implies}{\Rightarrow}
\newcommand{\at}[1]{@_{#1}\,}
\newcommand{\nec}[1]{[#1]}
\newcommand{\store}[1]{{\downarrow}#1\,{\cdot}\,}
\newcommand{\Forall}[1]{\forall #1\,{\cdot}\,}
\newcommand{\Q}[1]{\mathcal{Q}#1\,{\cdot}\,}
% ***************************************************************
\usepackage{mathpartir} %% for proof rules
\usepackage{xspace}

\newcommand{\rlImp}{(\textit{Imp})\xspace}
\newcommand{\rlMP}{(\textit{MP})\xspace}
\newcommand{\rlRet}{(\textit{Ret})\xspace}
\newcommand{\rlNEq}{(\textit{NEq})\xspace}
\newcommand{\rlNec}{(\textit{Nec})\xspace}
\newcommand{\rlSubst}{(\textit{Subst\({}_{s}\)})\xspace}

%***************************************************************

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%************************ title ********************************
\date{}
\title{Hybrid-dynamic Order-Sorted Algebra}
\author{}


%***************************************************************
\begin{document}
\maketitle

\section{Order-Sorted Algebra}

The order-sorted formalism that we consider in this paper, hereafter abbreviated $\OSA$, is a variation of the order-sorted algebra discussed in~\cite{Meseguer97} that supports both relational and equational atoms -- as opposed to only equational atoms.

\paragraph{Signatures}
The signatures are of the form \(\Sigma = (S, \leq, F, P)\), where 
\begin{enumerate}[label=\alph*)]

\item \((S, \leq)\) is a preorder, i.e.\ a set equipped with a reflexive and transitive relation, 

\item \((S, F, P)\) is a many-sorted first-order signature.

\end{enumerate}
Given a sort \(s \in S\), we denote by \([s]\) the set of its connected components $[s]=\{s'\in S\mid s'\equiv_\leq s\}$, where $\equiv_\leq$ is the equivalence on $S$ generated by the preorder $\leq$.
The signature $\Sigma$ is called \emph{sensible} if 
\begin{itemize}[nosep, leftmargin=1em]
\item for any operators $\sigma:\ari\to s,\sigma:\ari'\to s'\in F$ we have $\ari\equiv_\leq\ari'$ implies $s\equiv_\leq s'$.
\end{itemize}
The notion of sensible signature is a minimal syntactic requirement to avoid excessive ambiguity~\cite{Meseguer97}.
It is a much weaker requirement than preregularity~\cite{GoguenM92}.

\begin{assumption}
	For the sake of simplicity we assume that all connected components have a top sort.
By a slightly abuse of notation we let $[s]$ to denote both the connected component of $s$ and its top sort.
\end{assumption}
Throughout this paper, we let $\Sigma$, $\Sigma'$ and $\Sigma_i$ to range over $\OSA$ signatures of the form $(S,\leq,F,P)$, $(S',\leq',F',P')$ and $(S_i,\leq_i,F_i,P_i)$, respectively.

\paragraph{Signature morphisms.}
Signature morphisms $\varphi:(S,\leq,F,P)\to (S',\leq',F',P')$ are first-order signature morphisms $\varphi:(S,F,P)\to(S',F',P')$ such that 
\begin{enumerate}[label=\alph*),nosep,leftmargin=1.5em]

\item $\varphi:(S,\leq)\to(S',\leq')$ is monotonic, and

\item it preserves the sub-sort overloading: 
\begin{itemize}[nosep,leftmargin=1em]
\item for any operations $\sigma:\ari_1\to s_1, \sigma:\ari_2\to s_2\in F$ such that $\ari_1\equiv_\leq \ari_2$ we have  $\varphi_{\ari_1,s_1}(\sigma)=\varphi_{\ari_2,s_2}(\sigma)$, 
this means that operations with the same name (and in the same connected component) are mapped to operations with the same name, 

\item for any relations $\pi:\ari_1$ and $\pi:\ari_2$ such that $\ari_1\equiv_\leq \ari_2$ we have $\varphi_{\ari_1}(\pi)=\varphi_{\ari_2}(\pi)$, 
this means relations with the same name (and in the same connected component) are mapped to relations with the same name.
\end{itemize}
\end{enumerate}
We let $\Sig^\OSA$ to denote the category of $\OSA$ signature morphisms.

\begin{fact}
	For any non-sensible signature there exists an isomorphic sensible signature obtained by adding to the name of each operation symbol the connected components of their arities and sorts: 
	for example, an operation symbol $\sigma:\ari\to s$ will become $\sigma_{[\ari][s]}:\ari\to s$.
\end{fact}

\paragraph{Models}
Given a signature $\Sigma = (S, \leq, F, P)$, the $\Sigma$-models $\A$ interpret
\begin{enumerate}

\item each sort $s\in S$ as a set $\A_s$

\item each operation $(\sigma:\ari\to s)\in F$ as a function $\A_{\sigma:\ari\to s}\colon\A_\ari\to \A_s$,

\item each relation symbol $(\pi:\ari)\in P$ as a relation $\A_{\pi:\ari}\subseteq \A_\ari$, 

\end{enumerate}
such that:
\begin{enumerate}
 \item $\A_s\subseteq \A_{s'}$ whenever $s\leq s'$,

 \item $\A_{\sigma:\ari\to s}  $ and $ \A_{\sigma:\ari'\to s'}$ agree on $\A_\ari\cap \A_{\ari'}$ for all operations $\sigma:\ari\to s$ and $\sigma:\ari'\to s'$ in $F$ such that $[\ari]=[\ari']$, and
 \item $\A_{\pi:\ari}$ and $\A_{\pi:\ari'}$ coincide on \(\A_{\ari} \cap \A_{\ari'}\) for all relations $\pi:\ari$ and $\pi:\ari'$ in $P$ such that $[\ari]=[\ari']$.
\end{enumerate}
When there is no danger of confusion we may denote $\A_{\sigma:\ari\to s}$ and $\A_{\pi:\ari}$ simply by $\A_\sigma$ and $\A_\pi$, respectively.
A $\Sigma$-homomorphism $h:\A\to \B$ is a monotonic $S$-sorted function $h=\{h_s:\A_s\to \B_s\}_{s\in S}$ such that

\begin{enumerate}

\item if $s\leq s'$ then $h_s$ and $h_{s'}$ agree on $\A_s$,
  
\item $\A_\sigma ; h_s = h_\ari ; \B_\sigma$ for all $\sigma\colon\ari\to s\in F$, and

\item $h_\ari(\A_\pi)\subseteq \B_\pi$ for all $\pi\colon\ari \in P$.
\end{enumerate}
We let $\Mod^\OSA(\Sigma)$ to denote the category of $\Sigma$-models.

\paragraph{Terms}
The terms over a signature $\Sigma=(S,\leq,F,P)$ are defined inductively, as usual in the order-sorted-algebra literature.
For every sort $s \in S$, the set $T_{\Sigma, s}$ of $\Sigma$-terms is the least set such that:
\begin{itemize}
	\item $\sigma(t) \in T_{\Sigma, s}$ for all $\sigma \colon \ari \to s$ in $F$ and $t \in T_{\Sigma, \ari}$;
	
	\item $T_{\Sigma, s_0} \subseteq T_{\Sigma, s}$ whenever $s_0 \leq s$.
\end{itemize}
We denote by $T_{\Sigma, [s]}$ the set of all terms whose sort is in the same connected component as $s$; that is, $T_{\Sigma, [s]} = \bigcup \{ T_{\Sigma, s_0} \mid s_0\in S \mbox{ and } [s_0] = [s] \}$.

\paragraph{Sentences}
Let $\Sigma=(S,\leq,F,P)$ be a signature. 
There are three types of atomic sentences:
\begin{enumerate}
 \item \emph{equations} $t=t'$, where $t,t'\in T_{\Sigma,[s]}$ and $s\in S$,


 \item \emph{relations} $\pi(t)$, where $\pi:\ari\in P$ and $t\in T_{\Sigma,\ari}$.
\end{enumerate}
The set of $\Sigma$-sentences $\Sen^\OSA(\Sigma)$ are constructed from the above atomic sentences by applying Boolean connectives and quantification over finite sets of variables.
In order to avoid clashes of variables with constants from the target signatures when translating quantified sentences along signature morphisms we define variables for a signature $\Sigma$ as triples $(v,s,\Sigma)$, where 
 (a)~$v$ is the name of the variable, 
 (b)~$s$ is the sort of the variable, and
 (c) $\Sigma$ is the signature for which it was defined.
 Then we define quantified $\Sigma$-sentences as triples $\Q{X}\gamma$, where $\mathcal{Q}$ is a quantifier ($\forall$ or $\exists$), $X$ is a set of variables over $\Sigma$, and $\gamma$ is a sentence over $\Sigma[X]$ --- the signature obtained from $\Sigma$ by adding the variables in $X$ as constants to $\Sigma$.


If $\varphi\colon\Sigma\to \Sigma'$ and $\Forall{X}\gamma\in \Sen^\OSA(\Sigma)$ then $\varphi(\Forall{X}\gamma)=\Forall{X}\varphi'(\gamma)$, where $X'=\{(v,\varphi(s),\Sigma')\mid (v,s,\Sigma)\in X\}$ and $\varphi':\Sigma[X]\to\Sigma[X']$ maps every symbol in $\Sigma$ as $\varphi$ and any variable $(v,s,\Sigma)\in X$ to $(v,\varphi(s),\Sigma')\in X'$.
When there is no danger of confusion, we identify each variable by its name.
For more details about this topic, one may look into the quantification spaces defined in \cite{dia-qvh}.


\paragraph{Satisfaction relation.}
Given a signature $\Sigma=(S,\leq,F,P)$ and a $\Sigma$-model $\A$, the satisfaction of atomic sentences is based on the interpretation of terms:
\begin{enumerate}
\item $\A\models_\Sigma t=t'$ iff $\A_t= \A_{t'}$,

\item $\A\models\pi(t)$ iff $\A_t\in \A_\pi$.
\end{enumerate}
The satisfaction of sentences obtained by applying Boolean connectives and quantification is defined in the standard way.

\subsection{Congruences and quotients}

\begin{definition}[Order-sorted relation]
  Let \(\Sigma = (S, \leq, F, P)\) be an \(\OSA\)-signature, and \( \A \) a \(\Sigma\)-model.
  An $(S,\leq)$-relation on \(\A\) is an \(S\)-sorted relation \(\sim\) on \(\A\) such that \(\sim_{s}\) and \(\sim_{s_0}\) coincide on \(\A_{s} \cap \A_{s_0}\) for all sorts \(s, s_0 \in S\) such that \([s] = [s_0]\).

\end{definition}

\begin{definition}[Order-sorted congruence]
  An order-sorted $\Sigma$-congruence $\equiv$ on a \(\Sigma\)-model \(\A\) is an $(S,\leq)$-relation on $\A$ such that
  \begin{itemize}
    \item for all function symbols \(\sigma \colon \ari_{1} \to s_{1}\) and \(\sigma \colon \ari_{2} \to s_{2}\) with \([\ari_{1}] = [\ari_{2}]\), and elements \(a_{1}, a_{2} \in \A_{\ari_{1}} \cap \A_{\ari_{2}}\), if \(a_{1} \equiv_{\ari_{i}} a_{2}\) then \(\A_{\sigma}(a_{1}) \equiv_{s_{i}} \A_{\sigma}(a_{2})\);

    \item for all relation symbols \(\pi \colon \ari_{1}\) and \(\pi \colon \ari_{2}\) with \([\ari_{1}] = [\ari_{2}]\), and elements \(a_{1}, a_{2} \in \A_{\ari_{1}} \cap \A_{\ari_{2}}\), if \(a_{1} \equiv_{\ari_{i}} a_{2}\) and \(a_{1} \in \A_{\pi}\) then \(a_{2} \in \A_{\pi}\);
    \end{itemize}
\end{definition}

\begin{proposition}[Quotient]
  \label{prop:OSMA-quotient}
  Every \(\OSA\)-congruence \( \equiv\) on a model \( \A \) determines a \emph{quotient model} \(\widehat{\A}\), also denoted \(\A/_\equiv\), as follows:
  \begin{itemize}
  \item for every sort \(s \in S\), \(\widehat{\A}_{s} = \{\widehat{a} \in \widehat{\A}_{[s]} \mid a \in \A_{s}\}\), where \(\widehat{\A}_{[s]}\) is the quotient of the set \(\A_{[s]}\) determined by \(\equiv_{[s]}\);
  
  
  \item for every function symbol \(\sigma \colon \ari \to s\in F\) and \(a \in \A_{\ari}\), \(\widehat{\A}_{\sigma}(\widehat{a}) = \widehat{\A_{\sigma}(a)}\);
  
  \item for every relation \(\pi \colon \ari\in P\), \(\widehat{a} \in \widehat{\A}_{\pi}\) iff \(a \in \A_{\pi}\).
  
  \end{itemize}
\end{proposition}

\section{Hybrid-Dynamic Order-Sorted Algebra}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\bibliographystyle{abbrv}
\bibliography{hdosa}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}
